{% extends 'panel/base.html' %}
{% load custom_filters %}
{% block page_content %}

        <div class="container-fluid">

            <!-- Page Heading -->
            <div class="d-sm-flex align-items-center justify-content-between mb-4">
                <h1 class="h3 mb-0 text-gray-800">Reporte de Articulos mas vendidos</h1>
<!--
                <form action="{% url 'panel_reporte_articulos_list' %}" enctype="multipart/form-data" method="POST">
                
                  {% csrf_token %}
                  <div class="dropdown no-arrow">Desde:
                    <input type="text"  onblur="validar(this)" name="fecha_desde" id="fecha_desde"  value="{{ fecha_desde  | date:'d/m/Y' }}" />
                          Hasta:<input type="text"  onblur="validar(this)" name="fecha_hasta" id="fecha_hasta"  value="{{ fecha_hasta | date:'d/m/Y' }}"/>
                          <button type="submit" class="btn btn-primary"> <i class="fas fa-search"></i></button>
                  </div>
                </form>
-->
                <!-- Form Export
                <form action="{% url 'export_articulos_vendidos' %}" enctype="multipart/form-data" method="POST">
                    {% csrf_token %}
                    <input type="text"  onblur="validar(this)" name="fechadesde" id="fechadesde"  value="{{ fecha_desde  | date:'d/m/Y' }}" hidden />
                    <input type="text"  onblur="validar(this)" name="fechahasta" id="fechahasta"  value="{{ fecha_hasta  | date:'d/m/Y' }}" hidden/>
                    <button type="submit" class="btn btn-secondary" style="float: right;">Exportar xls</button>
                </form>
-->
            </div>
            <!-- Content Row -->
            
            <!-- Content Row -->
            <div class="row">
              <!-- Area Chart -->
                <div class="col-xl-12 col-lg-11">
                    <div class="card shadow mb-4">
                      <!-- Card Header - Dropdown -->
                 
                        <!-- Card Body -->
                        <div class="card-body">
                         
                            <table id="table" data-toggle="table" data-pagination="false" data-search="true"
                                data-show-columns="false" data-show-toggle="false" data-show-fullscreen="false"
                                data-toolbar=".buttons-toolbar"  data-locale="es-AR" data-sort-name="quantity" data-sort-order="desc">
                                <thead>
                                    <th data-sortable="true" data-field="Producto">Producto</th>
                                    <th data-sortable="true" data-field="stock">Stock Actual</th>
                                    <th data-sortable="true" data-field="stock_minimo">Stock Mínimo</th>
                                    <th data-sortable="true" data-field="total_mes_actual">Total Venta (Meses Actual)</th>
                                    <th data-sortable="true" data-field="promedio_6_meses">Promedio de venta (últimos 6 meses)</th>

                               
                                </thead>
                                <tbody>
                                    {% for producto, datos in productos.items %}
                                    <tr>
                                        <td>{{ producto }}</td>
                                        <td>{{ datos.stock }}</td>
                                        <td>{{ datos.stock_minimo }}</td>
                                        <td>{{ datos.total_mes_actual|format_integer_def }}</td>
                                        <td>{{ datos.promedio_6_meses|format_integer_def }}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>                                
                        </div>
                        
                </div>
              
            </div>
        </div> 
{% endblock %} 